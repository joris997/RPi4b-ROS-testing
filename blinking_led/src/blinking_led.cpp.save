
#include <ros/ros.h>
extern "C"{
#include <w	iringPi.h>
#include <std_msgs/Bool.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
	ros::init(argc, argv, "blinking_led");
	ros::NodeHandle nh;
	ros::Publisher pub = nh.advertise<std_msgs::Bool>("ledstatus",1);
	ros::Rate rate(10);

	std_msgs::Bool msg;
	msg.data = false;

	wiringPiSetup();
	pinMode(4,OUTPUT);

	while(ros::ok()){
		if(msg.data == false){
			msg.data = true;
			digitalWrite(4,HIGH);
		}
		else{
			msg.data = false;
			digitalWrite(4,LOW);
		}
		ROS_INFO_STREAM("Sending led status: " << msg.data);
		pub.publish(msg);

		rate.sleep();
	}
}
